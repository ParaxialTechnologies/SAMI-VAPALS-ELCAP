:doctitle: SAMI Patching Checklist for 18-19-b1 

[role="h1 center"]
SAMI Patching Checklist for 18-19-b1

-------------------------------------------------------------------------------
 0. Project discussion
  0.1. Which changes will be included
	    Several CT Eval Report fixes
	    Re-release of SAMIMOV

  0.2. Timeline: Release goal 9/24, Actual release

 1. Project set up
X  1.1. git pull
X  1.2. prepare checklist
X  1.3. prepare recipe doc
X  1.4. prepare template.txt doc  
X  1.5. git pull/push
X  1.6. list updated routines
		SAMICTT0
		SAMICTT1
		SAMICTT2
		SAMICTT3
		SAMICTT4
		SAMICTT9
		SAMICTTA
		SAMIMOV
		SAMIPAT
  
X  1.7. list log routines
        SAMICTUL

X  1.8. write change descriptions for template.txt  
X  1.9. update dashboard (Google Drive)
     https://docs.google.com/spreadsheets/d/1tWV8QQfLURjmypkk0Wbddwad_8UbUv1f9sf6ext1_Q0/edit?gid=1956251173#gid=1956251173 
     (sami pax) use pax^ARJTXRW	to determine dependencies
  1.10. Regrettable Bodge script
  		run within docs/www
  		../regrettable-bodge.py
  		then commit

 2. Update routines
X  2.1. Update SAMIPAT for pre/post-install if needed
      do SETPARM^SAMIPARM("SYS","samiSystemVersion","sami-18-18-b1")
X 2.2. convert to new short version ids, update dates & times in each routine
   or routine log (q to get out of log)
      view log with files
      git log --source --name-status
      or example: git log routines/SAMIUR.m
      or example: $ git log --format='%h %ad %an | %s' --date="format:%Y-%m-%d" routines/SAMIURUL.m 
X  2.3. update first four lines of routines (See VERSION CONTROL LINES FORMAT below)
X  2.4. if you wish, use ^%ZPT1 to compare first through third lines of routine for 
  		consistency. Example if you want to look at all four version control lines
  		zprint +1^SAMICAS3:+4
X  2.5. push to repo/pull to vapalsyotta

 3. Run XINDEX and ARJT
X  3.0. update recipe with before checksums -- do recipe^ARJTXRW
X  3.1. load in vapalsyotta ~/lib/silver/a-sami-vapals-elcap--vv-paraxtech-github
		do bash compare2.sh in routines before copying routines to make sure no 
		changed routines were missed. This compares the routines with those in
		~/run/routines/
X  3.2. copy routines to ~/run/routines directory
  		cp -v ROUTINE.m ~/run/routines/
X  3.3. run XINDEX (refer to XINDEX below)
X  3.4. fix any bugs,
X  3.5. use ARJT tools -- do recipe^ARJTXRW (see Introduction to ARJT tools text file)
X  3.6. update recipe with after information
  3.7. update dashboard https://docs.google.com/spreadsheets/d/1tWV8QQfLURjmypkk0Wbddwad_8UbUv1f9sf6ext1_Q0/edit?gid=1956251173#gid=1956251173
      (sami vers) use dash^ARJTXRW for dates and checksums
X  3.8. git pull/push, pull to vapalsyotta

 4. KIDS Build 
X  4.0 copy all new routines to ~/run/routines just in case
X  4.1 In linux cd ~/run/out/sami/18-19/ then mkdir 18-19 if necessary, cd 18-19
       mkdir b1
X  4.2. Re-enter mumps
X  4.3. Create KIDS build (XPD MAIN Menu)(Edits and Distributions) (see KIDS BUILD)
  		SAMI 18.0T05 -- don't include SAMI*18.0*7 or SAMI*18.0*14 in required builds
X  4.4. export to out dock (Transport distribution) 
		HF: /home/osehra/run/out/sami/18-19/b1/sami-18-19-b1.kid
		Header: Released SAMI*18.0*19 SEQ #19
X  4.5. copy to personal repo, typing following command when you are in the correct
        dist directory: scp 'vapalsyotta:/home/osehra/run/out/sami/18-19/b1/*.kid' ./
X  4.6. push to sami repo, pull to vapalsyotta in 
       ~/lib/silver/a-sami-vapals-elcap--vv-paraxtech-github/dist/18-19/b1$

 5. Finish draft documents  
X  5.1. Review recipe and make any needed changes
X  5.2. Review template.txt and make any needed changes
  5.3. Make {version}.adoc and {version}.tx doc from template.txt
       ../../dtool --textfile
  5.4. Review {version}.adoc and {version}.tx doc and make any needed updates
  5.5. git push/pull
   
 6. Create Zip package
   6.1. use zip to create archive package (../../dtool --makezip)
   6.2. push archive package to repo
   6.3. update version website's link

 7. Test Install
  7.0 Pull to vapalsyotta and move KIDS to ~/run/in/sami/18-17/b8/
  7.1. install on vapalsyotta (& revise if necessary),
  HF: /home/osehra/run/in/sami/18-17/b7/sami-18-17-b8.kid
  7.2. test changes on vapalsyotta (vapalsyotta.vistaexpertise.net:9080/vapals)
  		if possible test on multiple browsers and OSs.
  		to restart web server
  			d stop^%webreq
  			d go^%webreq
  			zwr ^%webhttp
  7.3. update dashboard (sami envs)
  7.4 copy new routines to repo routines 
N  7.4. install on vapalscache (& revise if necessary), (not avail due to cache expire)
N  7.5. test changes on vapalscache
N  7.6. update dashboard (sami envs)
  7.7. send any necessary updates for user and tech manual changes
  7.8. Skype team and ask them to test

8. Release Patch
  8.1. Email interested parties
  8.2. Update VAPALS Bugs and Requested Features spreadsheet
  8.3. File any returned captures
  8.4. Update dashboard (sami envs)
  
-------------------------------------------------------------------------------
VERSION CONTROL LINES FORMAT
Line 1: ROUTINENAME  ;dev/inits description;space datetime
		example: POKERM  ;ven/lmry basic structure of poker game; 08-23-2024t19:46z
		
Line 2: space;;edition;APPNAME;**dependency list**;original app release date
		example:  ;;1.0;POKER;**2,3**;2024-01
		
Line 3: space;mdc-e1;ROUTINENAME-date-echecksum;build
		example: ;mdc-e1:POKERM-20240823-RS3D8n;poker-1-3-b1

Line 4: space;mdc-v7;bchecksum;full patch id
		example: ;mdc-v7;1056432;POKER*1.0*3 SEQ #3


XINDEX
	In Mumps programmer mode:
	> DO ^XINDEX
	Copy in list of routines.
	Ignore questions until you get down to the question:
	Print more than compiled errors and warnings? YES//no
	Save parameters in ROUTINE file? NO//yes
	Index all called routines? NO//    (leave as no)
	DEVICE: ;c-scroll
	Hit return then review Errors and Warnings
	
KIDS BUILD
	Enter into Vista
	DO ^XUP 
	Select OPTION NAME:XPD MAIN
	Select Kernel Installation & Distribution System Option: EDits and Distribution
	Select Edits and Distribution Option: EDit a Build
	Select BUILD NAME:SAMI*18.0*19
	Are you adding 'SAMI*18.0*19' as a new BUILD (the XXXXXth)? No// Y
	BUILD PACKAGE FILE LINK:
	BUILD TYPE: SINGLE PACKAGE// 
	BUILD TRACK PACKAGE NATIONALLY: YES// N
	

	PAGE 1/5
	Name should be entered, enter distribution date, tab through description and
	Environment Routine.
	If there are Pre-Install or Post-Install Routines enter them. I usually put N
	for Delete Routine.
	Tab down to COMMAND: N (for Next Page)
	
	PAGE 2/5
	Tab down to COMMAND: N (for Next Page)
	
	PAGE 3/5
	Build Components
	Tab down to ROUTINES and hit enter
	Enter each routine individually, tab, then tab again to accept S for Send to Site
	Once all the routines are entered,tab down to COMMAND: C for Close
	Tab through the remaining Build Components Options, making sure that Routines has
	the right number of routines in the parentheses.
	Tab down to COMMAND: N (for Next Page)
	
	PAGE 4/5
	Tab down to COMMAND: N (for Next Page)
	Later we will be adding Required Builds
	
	PAGE 5/5
	Tab down to COMMAND: S (for Save) then E for Exit

TRANSPORT DISTRIBUTION

          Create a Build Using Namespace
          Copy Build to Build
          Edit a Build
          Transport a Distribution
          Old Checksum Update from Build
          Old Checksum Edit
          Routine Summary List
          Version Number Update

Select Edits and Distribution <TEST ACCOUNT> Option: transport a Distribution

Enter the Package Names to be transported. The order in which
they are entered will be the order in which they are installed.


First Package Name:    SAMI*18.0*19       
Another Package Name: 

ORDER   PACKAGE
  1    SAMI*18.0*19



OK to continue? YES// y  YES
Transport through (HF)Host File or (PM)PackMan: HF  Host File

Enter a Host File: /home/osehra/run/out/sami/18-19/b1/sami-18-19-b1.kid
Header Comment: Released SAMI*18.0*19 SEQ #19


     SAMI*18.0*19...
No Package File Link

Package Transported Successfully
