<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">

    {# PULMONARY ABNORMALITIES #}
    <div class="panel panel-default">
        <div class="panel-heading" role="tab" data-toggle="collapse" href="#pulmonary-container"
             aria-expanded="true" aria-controls="pulmonary-container"
             data-field-name="cepa" style="cursor:pointer;">
            <h4 class="panel-title">
                <i class="fa-regular fa-chevron-down"></i>
                <i class="fa-regular fa-chevron-up" style="display: none;"></i>
                Pulmonary
            </h4>
        </div>
        <div id="pulmonary-container" class="panel-collapse collapse" role="tabpanel">
            <div class="panel-body">
                <input type="hidden" name="cepa"/>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                        <tr>
                            <th></th>
                            <th></th>
                            <th title="Right Upper Lobe">RUL</th>
                            <th title="Right Middle Lobe">RML</th>
                            <th title="Right Lower Lobe">RLL</th>
                            <th title="Left Upper Lobe">LUL</th>
                            <th title="Left Lower Lobe">LLL</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% set rf = ["rul","rml","rll","lul","lll"] %}
                        <tr>
                            <td><label class="control-label">Cysts</label></td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("cecbc") }}
                                </div>
                            </td>
                            {% for i in [1,2,3,4,5] %}
                                <td>
                                    <div class="form-group cecbc-container">
                                        {{ f.checkbox("cecbcl"+i|string, rf[i-1], "") }}
                                    </div>
                                </td>
                            {% endfor %}
                        </tr>
                        <tr>
                            <td><label class="control-label">Blebs/Bullae</label></td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("cecbb") }}
                                </div>
                            </td>
                            {% for i in [1,2,3,4,5] %}
                                <td>
                                    <div class="form-group cecbb-container">
                                        {{ f.checkbox("cecbbl"+i|string, rf[i-1], "") }}
                                    </div>
                                </td>
                            {% endfor %}
                        </tr>
                        <tr>
                            <td><label class="control-label">Regional or diffuse
                                consolidation</label><br/>
                                <small>(focal - put in nodule grid)</small>
                            </td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("cerdc") }}
                                </div>
                            </td>
                            {% for i in [1,2,3,4,5] %}
                                <td>
                                    <div class="form-group cerdc-container">
                                        {{ f.checkbox("cerdcl"+i|string, rf[i-1], "") }}
                                    </div>
                                </td>
                            {% endfor %}
                        </tr>
                        <tr>
                            <td><label class="control-label">Scarring</label>
                                <i class="fa-regular fa-circle-question"
                                   aria-hidden="true" data-toggle="popover" data-html="true"
                                   title="Guidelines for entering scarring"
                                   data-content="Right apical scarring:<br/> - Check both the apical unilateral box and the RUL box.<br/><br/>Left apical scarring:<br/> - Check both the apical unilateral box and the LUL box.<br/><br/>Biapical scarring: <br/> - Check the apical bilateral box and both the RUL and LUL boxes.<br/><br/>Bilateral basilar scarring:<br/> - Check the RLL and LLL boxes.<br/><br/>Bilateral scarring:<br/> - Check all of the boxes."></i>
                            </td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("cescr") }}
                                </div>
                            </td>
                            {% for i in [1,2,3,4,5] %}
                                <td>
                                    <div class="form-group cescr-container">
                                        {{ f.checkbox("cescrl"+i|string, rf[i-1], "") }}
                                    </div>
                                </td>
                            {% endfor %}
                        </tr>
                        <tr>
                            <td style="border-top:none;"></td>
                            <td colspan="6" style="border-top:none;">
                                <div class="form-group form-inline cescr-container">
                                    <label>Apical</label>&nbsp;
                                    {{ f.checkbox("cescrl6","au","Unilateral") }}
                                    {{ f.checkbox("cescrl7","ab","Bilateral") }}
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td><label class="control-label">Bronchiectasis</label></td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("cebrsb") }}
                                </div>
                            </td>
                            {% for i in [1,2,3,4,5] %}
                                <td>
                                    <div class="form-group cebrsb-container">
                                        {{ f.checkbox("cebrsbl"+i|string, rf[i-1], "") }}
                                    </div>
                                </td>
                            {% endfor %}
                        </tr>

                        <tr>
                            <td><label class="control-label">Small airways disease</label></td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("cebrss") }}
                                </div>
                            </td>
                            {% for i in [1,2,3,4,5] %}
                                <td>
                                    <div class="form-group cebrss-container">
                                        {{ f.checkbox("cebrssl"+i|string, rf[i-1], "") }}
                                    </div>
                                </td>
                            {% endfor %}
                        </tr>
                        <tr>
                            <td>
                                <label class="control-label">Post-surgical findings</label><br/>
                                <small>(i.e. bronchial resection margin)</small>
                            </td>
                            <td>
                                <div class="form-group">
                                    {{ f.inlineRadio("cebs", "cebs-n","n","N/A") }}
                                    {{ f.inlineRadio("cebs", "cebs-o","o","Normal") }}
                                    {{ f.inlineRadio("cebs", "cebs-y","y","Abnormal") }}
                                    {{ f.inlineRadio("cebs", "cebs-e","e","Not visible") }}
                                </div>
                            </td>
                            <td colspan="5">
                                <div class="form-group form-inline">
                                    {{ f.checkbox("cebsrt", "r", "Right") }}
                                    &nbsp;
                                    {{ f.checkbox("cebslt", "l", "Left") }}
                                </div>
                            </td>

                        </tr>
                        </tbody>
                    </table>
                    <h4>Early and Late Findings of Interstitial Lung Disease</h4>
                    <table class="table">
                        <thead>
                        <tr>
                            <th></th>
                            <th></th>
                            <th title="Right Upper Lobe">RUL</th>
                            <th title="Right Middle Lobe">RML</th>
                            <th title="Right Lower Lobe">RLL</th>
                            <th title="Left Upper Lobe">LUL</th>
                            <th title="Left Lower Lobe">LLL</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td><label class="control-label">Traction bronchiectasis in a peripheral
                                location</label></td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("cerb") }}
                                </div>
                            </td>
                            {% for i in [1,2,3,4,5] %}
                                <td>
                                    <div class="form-group cerb-container">
                                        {{ f.checkbox("cerbl"+i|string, rf[i-1], "") }}
                                    </div>
                                </td>
                            {% endfor %}
                        </tr>

                        <tr>
                            <td><label class="control-label">Peripheral ground-glass opacities</label>
                            </td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("cepgo") }}
                                </div>
                            </td>
                            {% for i in [1,2,3,4,5] %}
                                <td>
                                    <div class="form-group cepgo-container">
                                        {{ f.checkbox("cepgol"+i|string, rf[i-1], "") }}
                                    </div>
                                </td>
                            {% endfor %}
                        </tr>

                        <tr>
                            <td><label class="control-label">Reticulations</label></td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("ceret") }}
                                </div>
                            </td>
                            {% for i in [1,2,3,4,5] %}
                                <td>
                                    <div class="form-group ceret-container">
                                        {{ f.checkbox("ceretl"+i|string, rf[i-1], "") }}
                                    </div>
                                </td>
                            {% endfor %}
                        </tr>

                        <tr>
                            <td><label class="control-label">Honeycombing</label></td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("cephc") }}
                                </div>
                            </td>
                            {% for i in [1,2,3,4,5] %}
                                <td>
                                    <div class="form-group cephc-container">
                                        {{ f.checkbox("cephcl"+i|string, rf[i-1], "") }}
                                    </div>
                                </td>
                            {% endfor %}
                        </tr>

                        <tr>
                            <td colspan="7">
                                <div class="form-group">
                                    <label for="ceoppa">Additional comments on pulmonary abnormalities</label>
                                    <textarea name="ceoppa" id="ceoppa"
                                              class="form-control"></textarea>
                                    {{ f.inlineCheckbox("ceoppai", "y", "Include in impression") }}
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    {# PLEURAL ABNORMALIITES #}
    <div class="panel panel-default">
        <div class="panel-heading" role="tab" data-toggle="collapse" href="#pleural-container"
             aria-expanded="true" aria-controls="pleural-container" data-field-name="ceppra" style="cursor:pointer;">
            <h4 class="panel-title">
                <i class="fa-regular fa-chevron-down"></i>
                <i class="fa-regular fa-chevron-up" style="display: none;"></i>
                Pleural or pleural-related
            </h4>
        </div>
        <div id="pleural-container" class="panel-collapse collapse" role="tabpanel">
            <div class="panel-body">
                <input type="hidden" name="ceppra"/>
                <div class="table-responsive">
                    <table class="table">
                        <tbody>
                        <tr>
                            <td>
                                <label class="control-label">Pleural thickening/plaques</label>
                            </td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("cept") }}
                                </div>
                            </td>
                            <td colspan="5">
                                <div class="form-group form-inline cept-container">
                                    {{ f.checkbox("ceptrt", "r", "Right") }}
                                    &nbsp;
                                    {{ f.checkbox("ceptlt", "l", "Left") }}
                                    &nbsp;
                                    {{ f.checkbox("ceptct", "c", "Calcification") }}
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td><label class="control-label">Rounded atelectasis</label></td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("cebatr") }}
                                </div>
                            </td>
                            <td colspan="5">
                                <table class="table">
                                    <thead>
                                    <tr>
                                        <th>RUL</th>
                                        <th>RML</th>
                                        <th>RLL</th>
                                        <th>LUL</th>
                                        <th>LLL</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        {% for i in [1,2,3,4,5] %}
                                            <td>
                                                <div class="form-group cebatr-container">
                                                    {{ f.checkbox("cebatrl"+i|string, rf[i-1], "") }}
                                                </div>
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    </tbody>
                                </table>
                            </td>

                        </tr>

                        <tr>
                            <td><label class="control-label" for="cepev">Pleural
                                effusion</label></td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("cepev") }}
                                </div>
                            </td>
                            <td colspan="5" class="cepev-container">
                                <div class="form-group pull-left">
                                    <label for="ceper">Right</label>
                                    <select id="ceper" name="ceper" class="form-control" required="required">
                                        <option value="-"> -</option>
                                        <option value="no"> None</option>
                                        <option value="sm"> Small</option>
                                        <option value="mo"> Moderate</option>
                                        <option value="lg"> Large</option>
                                    </select>
                                </div>

                                <div class="form-group pull-left">
                                    <label for="cepel">Left</label>
                                    <select id="cepel" name="cepel" class="form-control" required="required">
                                        <option value="-"> -</option>
                                        <option value="no"> None</option>
                                        <option value="sm"> Small</option>
                                        <option value="mo"> Moderate</option>
                                        <option value="lg"> Large</option>
                                    </select>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td><label class="control-label">Pleural tumor</label></td>
                            <td colspan="6">
                                <div class="form-group">
                                    {{ f.yesCheckbox("cepu") }}
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="7">
                                <div class="form-group">
                                    <label for="ceoppab">Additional comments on pleural
                                        abnormalities</label>
                                    <textarea name="ceoppab" id="ceoppab" class="form-control"></textarea>
                                    {{ f.inlineCheckbox("ceoppabi", "y", "Include in impression") }}
                                </div>
                            </td>
                        </tr>
                        {% if (site == 'sinai') %}
                        <tr>
                            <td colspan="7">
                                <div class="form-group">
                                    <label for="ceaippc">AI Parenchymal/Pleural Comments</label>
                                    <textarea name="ceaippc" id="ceaippc" class="form-control"></textarea>
                                </div>
                            </td>
                        </tr>
                        {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    {# CARDIAC ABNORMALITIES #}
    <div class="panel panel-default">
        <div class="panel-heading" role="tab" data-toggle="collapse" href="#cardiac-container"
             aria-expanded="true" aria-controls="cardiac-container" data-field-name="ceca" style="cursor:pointer;">
            <h4 class="panel-title">
                <i class="fa-regular fa-chevron-down"></i>
                <i class="fa-regular fa-chevron-up" style="display: none;"></i>
                Cardiac and aorta
            </h4>
        </div>
        <div id="cardiac-container" class="panel-collapse collapse" role="tabpanel">
            <div class="panel-body">
                <input type="hidden" name="ceca"/>
                <div class="row">
                    <div class="col-sm-6 col-md-4 col-lg-3 form-group">
                        <label class="control-label" for="cecca">Aortic calcifications</label>
                        <select name="cecca" id="cecca" class="form-control">
                            <option value="-"> -</option>
                            <option value="no"> None</option>
                            <option value="mi"> Minimal < &frac13;</option>
                            <option value="mo"> Moderate</option>
                            <option value="ex"> Extensive > &frac23;</option>
                        </select>
                    </div>
                </div>
                {% if site == 'sinai' %}
                    <div class="row">
                        <div class="col-sm-6 col-md-4 col-lg-3 form-group">
                            <label class="control-label" for="ceavc">Aortic valve calcifications</label>
                            <select name="ceavc" id="ceavc" class="form-control">
                                <option value="-"> -</option>
                                <option value="no"> None</option>
                                <option value="mi"> Minimal < &frac13;</option>
                                <option value="mo"> Moderate</option>
                                <option value="ex"> Extensive > &frac23;</option>
                            </select>
                        </div>
                    </div>
                {% endif %}
                <div class="row">
                    <div class="col-sm-6 col-md-4 col-lg-3 form-group">
                        <label class="control-label" for="ceprevm">Pericardial effusion severity</label>
                        <select name="ceprevm" id="ceprevm" class="form-control"
                                title="Pericardial Effusion Severity">
                            <option value="-"> -</option>
                            <option value="no"> None</option>
                            <option value="mi"> Minimal</option>
                            <option value="mo"> Moderate</option>
                            <option value="ex"> Extensive</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12 form-group">
                        <label for="cecommca">Additional comments on cardiac abnormalities</label>
                        <textarea name="cecommca" id="cecommca"
                                  class="form-control"></textarea>
                        {{ f.inlineCheckbox("cecommcai", "y", "Include in impression") }}
                    </div>
                </div>
                {% if (site == 'sinai') %}
                    <tr>
                        <td colspan="7">
                            <div class="form-group">
                                <label for="ceaicac">AI Cardiac Comments</label>
                                <textarea name="ceaicac" id="ceaicac" class="form-control"></textarea>
                            </div>
                        </td>
                    </tr>
                {% endif %}
            </div>
        </div>
    </div>

    {# Neck and Mediastinal Abnormalities #}
    <div class="panel panel-default">
        <div class="panel-heading" role="tab" data-toggle="collapse" href="#neck-container"
             aria-expanded="true" aria-controls="neck-container"
             data-field-name="ceoma" style="cursor:pointer;">
            <h4 class="panel-title">
                <i class="fa-regular fa-chevron-down"></i>
                <i class="fa-regular fa-chevron-up" style="display: none;"></i>
                Neck and mediastinal
            </h4>
        </div>
        <div id="neck-container" class="panel-collapse collapse" role="tabpanel">
            <div class="panel-body">
                <input type="hidden" name="ceoma"/>
                <div class="table-responsive">
                    <table class="table">
                        <tbody>
                        <tr>
                            <td><label class="control-label">Thyroid</label></td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("ceata") }}
                                </div>
                            </td>
                            <td>
                                <div class="form-group form-inline ceata-container">
                                    {{ f.checkbox("ceatc","c","Calcification") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceaty","y","Cyst/nodule < 15 mm") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceatm","m","Mass") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceato","o","Other") }}&nbsp;&nbsp;
                                    <label for="ceatos" class="aria-hidden">Specify</label>
                                    <input type="text" name="ceatos" id="ceatos" class="form-control"
                                           required="required" placeholder="Specify">
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td><label class="control-label">Thymus</label><br/>
                                <small>(report if ovoid &gt; 7 mm or if thymic shape with width &gt; 1.3cm)
                                </small>
                            </td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("ceaya") }}
                                </div>
                            </td>
                            <td>
                                <div class="form-group form-inline ceaya-container">
                                    {{ f.checkbox("ceayc","c","Calcification") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceayy","y","Cyst") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceaym","m","Mass") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceayo","o","Other") }}&nbsp;&nbsp;
                                    <label for="ceayos" class="aria-hidden">Specify</label>
                                    <input type="text" name="ceayos" id="ceayos" class="form-control"
                                           required="required" placeholder="Specify">
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td colspan="3">
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <h4>Lymph Nodes
                        <small>(w/o central fat)</small>
                    </h4>

                    <table class="table">
                        <tbody>

                        <tr>
                            <td width="50%">
                                Any enlarged or growing hilar or mediastinal lymph nodes<br/>
                                <small>(short axis &gt; 10mm)<br/>
                                    <strong>(any size for para-esophageal)</strong></small>
                                <br/>
                                <a href="{{ path }}img/nodal_chart.gif" target="_blank" title="Click for larger image">
                                    <img src="{{ path }}img/nodal_chart.gif" title="Lymph node chart" class="hidden-xs"
                                         alt="Lymph node chart" style="max-width: 675px;"/>
                                    <span class="visible-xs">View lymph node chart</span>
                                </a>
                            </td>
                            <td>
                                <div class="form-group form-inline">
                                    {{ f.yesCheckbox("cemln") }}
                                </div>
                            </td>
                            <td>
                                <div class="form-group" id="cemln-container">
                                    <label for="cemlnl1">Level</label>
                                    <small class="text-muted">8<sup>th</sup> edition
                                        classification: CHEST 2017; 151: 193-203
                                    </small>
                                    {{ f.checkbox("cemlnl1","N1","N1: Low cervical, supraclavicular, and sternal notch nodes") }}
                                    {{ f.checkbox("cemlnl2r","N2R","N2R: Upper paratracheal (right)") }}
                                    {{ f.checkbox("cemlnl2l","N2L","N2L: Upper paratracheal (left)") }}
                                    {{ f.checkbox("cemlnl3a","N3A","N3A: Prevascular") }}
                                    {{ f.checkbox("cemlnl3p","N3P","N3P: Retrotracheal") }}
                                    {{ f.checkbox("cemlnl4r","N4R","N4R: Lower paratracheal (right)") }}
                                    {{ f.checkbox("cemlnl4l","N4L","N4L: Lower paratracheal (left)") }}
                                    {{ f.checkbox("cemlnl5","N5","N5: Subaortic") }}
                                    {{ f.checkbox("cemlnl6","N6","N6: Para-aortic (ascending aorta or phrenic)") }}
                                    {{ f.checkbox("cemlnl7","N7","N7: Subcarinal") }}
                                    {{ f.checkbox("cemlnl8","N8","N8: Paraesophageal (below carina)") }}
                                    {{ f.checkbox("cemlnl9","N9","N9: Pulmonary ligament") }}
                                    {{ f.checkbox("cemlnl10r","N10R","N10R: Hilar (right)") }}
                                    {{ f.checkbox("cemlnl10l","N10L","N10L: Hilar (left)") }}
                                    {{ f.checkbox("cemlnl11r","N11R","N11R: Interlobar (right)") }}
                                    {{ f.checkbox("cemlnl11l","N11L","N11L: Interlobar (left)") }}
                                    {{ f.checkbox("cemlnl12r","N12R","N12R: Lobar (right)") }}
                                    {{ f.checkbox("cemlnl12l","N12L","N12L: Lobar (left)") }}
                                    {{ f.checkbox("cemlnl13r","N13R","N13R: Segmental (right)") }}
                                    {{ f.checkbox("cemlnl13l","N13L","N13L: Segmental (left)") }}
                                    {{ f.checkbox("cemlnl14r","N14R","N14R: Subsegmental (right)") }}
                                    {{ f.checkbox("cemlnl14l","N14L","N14L: Subsegmental (left)") }}
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Any calcified hilar or mediastinal lymph nodes</td>
                            <td colspan="2">
                                <div class="form-group">
                                    {{ f.yesCheckbox("cemlncab") }}
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td>Abnormal axillary lymph nodes</td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("ceagaln") }}
                                </div>
                            </td>
                            <td style="padding-top:1px;">
                                <div class="form-group form-inline ceagaln-container">
                                    {{ f.checkbox("ceagalnrt","r","Right") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceagalnlt","l","Left") }}&nbsp;&nbsp;
                                    <label for="ceagalns" class="aria-hidden">Specify</label>
                                    <input type="text" name="ceagalns" id="ceagalns" class="form-control"
                                           required="required" placeholder="Specify">
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Other Vascular Abnormalities</td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("cemva") }}
                                </div>
                            </td>
                            <td style="padding-top:1px;">
                                <div class="form-group form-inline cemva-container">
                                    {{ f.checkbox("cemvaa","a","Aorta") }}&nbsp;&nbsp;
                                    {{ f.checkbox("cemvap","w","Pulmonary arteries") }}&nbsp;&nbsp;
                                    {{ f.checkbox("cemvao","o","Other") }}&nbsp;&nbsp;
                                    <label for="cemvaos" class="aria-hidden">Specify</label>
                                    <input type="text" name="cemvaos" id="cemvaos" class="form-control"
                                           required="required" placeholder="Specify">
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td>Esophageal</td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("cemeln") }}
                                </div>
                            </td>
                            <td style="padding-top:1px;">
                                <div class="form-group form-inline cemeln-container">
                                    {{ f.checkbox("cemelna","a","Air-fluid level") }}&nbsp;&nbsp;
                                    {{ f.checkbox("cemelnw","w","Wall thickening") }}&nbsp;&nbsp;
                                    {{ f.checkbox("cemelnm","m","Mass") }}&nbsp;&nbsp;
                                    {{ f.checkbox("cemvlno","o","Other") }}&nbsp;&nbsp;
                                    <label for="cemelnos" class="aria-hidden">Specify</label>
                                    <input type="text" name="cemelnos" id="cemelnos" class="form-control"
                                           required="required" placeholder="Specify">
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td>Hiatal Hernia</td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("cehhn") }}
                                </div>
                            </td>
                            <td style="padding-top:1px;">
                                <div class="form-group form-inline cehhn-container">
                                    <label for="cehhnos" class="aria-hidden">Specify</label>
                                    <input type="text" name="cehhnos" id="cehhnos" class="form-control"
                                           required="required" placeholder="Specify">
                                </div>
                            </td>
                        </tr>


                        <tr>
                            <td>Other Mediastinal Masses</td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("ceomm") }}
                                </div>
                            </td>
                            <td style="padding-top:1px;">
                                <div class="form-group form-inline ceomm-container">
                                    {{ f.checkbox("ceamc","v","Calcification") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceamy","y","Cyst") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceamm","m","Mass") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceamo","o","Other") }}&nbsp;&nbsp;
                                    <label for="ceommos" class="aria-hidden">Specify</label>
                                    <input type="text" name="ceommos" id="ceommos" class="form-control"
                                           required="required" placeholder="Specify">
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3">
                                <div class="form-group">
                                    <label for="ceotabnm">Additional comments on neck and
                                        mediastinal
                                        abnormalities</label>
                                    <textarea name="ceotabnm" id="ceotabnm" class="form-control"></textarea>
                                    {{ f.inlineCheckbox("ceotabnmi", "y", "Include in impression") }}
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>

    {# Breast Abnormalities #}
    <div class="panel panel-default">
        <div class="panel-heading" role="tab" data-toggle="collapse" href="#breast-container"
             aria-expanded="true" aria-controls="breast-container"
             data-field-name="ceoba" style="cursor:pointer;">
            <h4 class="panel-title">
                <i class="fa-regular fa-chevron-down"></i>
                <i class="fa-regular fa-chevron-up" style="display: none;"></i>
                Breast
            </h4>
        </div>
        <div id="breast-container" class="panel-collapse collapse" role="tabpanel">
            <div class="panel-body">
                <input type="hidden" name="ceoba"/>
                <div class="table-responsive">
                    <table class="table">
                        <tbody>
                        <tr>
                            <td>Right Breast</td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("ceara") }}
                                </div>
                            </td>
                            <td>
                                <div class="form-group form-inline ceara-container">
                                    {{ f.checkbox("ceobarc","c","Calcification") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceobary","y","Cyst") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceobarm","m","Mass") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceobaro","o","Other") }}&nbsp;&nbsp;
                                    <label for="ceobaros" class="aria-hidden">Specify</label>
                                    <input type="text" name="ceobaros" id="ceobaros" class="form-control"
                                           required="required" placeholder="Specify">
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">Right Breast Density Classification (BI-RADS)</td>
                            <td>
                                <div class="form-group">
                                    <label for="ceobard" class="aria-hidden">Right Breast Density Classification</label>
                                    <select name="ceobard" id="ceobard" class="form-control">
                                        <option value="-"> -</option>
                                        <option value="1"> 1 - Almost entirely fatty</option>
                                        <option value="2"> 2 - Scattered areas of fibroglandular density</option>
                                        <option value="3"> 3 - Heterogeneously dense</option>
                                        <option value="4"> 4 - Extremely dense</option>
                                    </select>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td>Left Breast</td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("ceafa") }}
                                </div>
                            </td>
                            <td>
                                <div class="form-group form-inline ceafa-container">
                                    {{ f.checkbox("ceobafc","c","Calcification") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceobafy","y","Cyst") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceobafm","m","Mass") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceobafo","o","Other") }}&nbsp;&nbsp;
                                    <label for="ceobafos" class="aria-hidden">Specify</label>
                                    <input type="text" name="ceobafos" id="ceobafos" class="form-control"
                                           required="required" placeholder="Specify">
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">Left Breast Density Classification (BI-RADS)</td>
                            <td>
                                <div class="form-group">
                                    <label for="ceobald" class="aria-hidden">Left Breast Density Classification</label>
                                    <select name="ceobald" id="ceobald" class="form-control">
                                        <option value="-"> -</option>
                                        <option value="1"> 1 - Almost entirely fatty</option>
                                        <option value="2"> 2 - Scattered areas of fibroglandular density</option>
                                        <option value="3"> 3 - Heterogeneously dense</option>
                                        <option value="4"> 4 - Extremely dense</option>
                                    </select>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3">
                                <div class="form-group">
                                    <label for="ceobrc">Additional comments on breast abnormalities</label>
                                    <textarea name="ceobrc" id="ceobrc" class="form-control"></textarea>
                                    {{ f.inlineCheckbox("ceobrci", "y", "Include in impression") }}
                                </div>
                            </td>
                        </tr>
                        {% if (site == 'sinai') %}
                            <tr>
                                <td colspan="7">
                                    <div class="form-group">
                                        <label for="ceaibc">AI Bone Comments</label>
                                        <textarea name="ceaibc" id="ceaibc" class="form-control"></textarea>
                                    </div>
                                </td>
                            </tr>
                        {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    {# Bone Abnormalities #}
    <div class="panel panel-default">
        <div class="panel-heading" role="tab" data-toggle="collapse" href="#bone-container" aria-expanded="true"
             aria-controls="bone-container" data-field-name="ceaba" style="cursor:pointer;">
            <h4 class="panel-title">
                <i class="fa-regular fa-chevron-down"></i>
                <i class="fa-regular fa-chevron-up" style="display: none;"></i>
                Bone
            </h4>
        </div>
        <div id="bone-container" class="panel-collapse collapse" role="tabpanel">
            <div class="panel-body">
                <input type="hidden" name="ceaba"/>
                <div class="row">
                    <div class="form-group col-sm-12">
                        <label for="ceaoabb">Specify bone abnormalities</label>
                        <textarea name="ceaoabb" id="ceaoabb" class="form-control"></textarea>
                        {{ f.inlineCheckbox("ceaoabbi", "y", "Include in impression") }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    {# Abdominal Abnormalities #}
    <div class="panel panel-default">
        <div class="panel-heading" role="tab" data-toggle="collapse" href="#abdominal-container"
             aria-expanded="true" aria-controls="abdominal-container" data-field-name="ceoaa" style="cursor:pointer;">
            <h4 class="panel-title">
                <i class="fa-regular fa-chevron-down"></i>
                <i class="fa-regular fa-chevron-up" style="display: none;"></i>
                Abdominal
            </h4>
        </div>
        <div id="abdominal-container" class="panel-collapse collapse" role="tabpanel">
            <div class="panel-body">
                <input type="hidden" name="ceoaa"/>
                <div class="table-responsive" id="abdominal-container">
                    <table class="table">
                        <tbody>
                        <tr>
                            <td>Gallbladder</td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("ceaga") }}
                                </div>
                            </td>
                            <td>
                                <div class="form-group form-inline ceaga-container">
                                    {{ f.checkbox("ceagh","h","Cholecystectomy") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceags","s","Stones") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceagl","l","Sludge") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceago","y","Other") }}&nbsp;&nbsp;
                                    <label for="ceagos" class="aria-hidden">Specify</label>
                                    <input type="text" name="ceagos" id="ceagos" class="form-control"
                                           required="required" placeholder="Specify">
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td>Spleen</td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("ceasa") }}
                                </div>
                            </td>
                            <td>
                                <div class="form-group form-inline ceasa-container">
                                    {{ f.checkbox("ceasc","y","Calcification") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceasy","y","Cyst") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceasm","m","Mass") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceaso","y","Other") }}&nbsp;&nbsp;
                                    <label for="ceasos" class="aria-hidden">Specify</label>
                                    <input type="text" name="ceasos" id="ceasos" class="form-control"
                                           required="required" placeholder="Specify">
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td>Liver</td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("ceala") }}
                                </div>
                            </td>
                            <td>
                                <div class="form-group form-inline ceala-container">
                                    {{ f.checkbox("cealc","y","Calcification") }}&nbsp;&nbsp;
                                    {{ f.checkbox("cealy","y","Cyst") }}&nbsp;&nbsp;
                                    {{ f.checkbox("cealm","m","Mass") }}&nbsp;&nbsp;
                                    {{ f.checkbox("cealh","h","HU < 40") }}&nbsp;&nbsp;
                                    {{ f.checkbox("cealo","y","Other") }}&nbsp;&nbsp;
                                    <label for="cealos" class="aria-hidden">Specify</label>
                                    <input type="text" name="cealos" id="cealos" class="form-control"
                                           required="required" placeholder="Specify">
                                </div>
                            </td>
                        </tr>


                        <tr>
                            <td>Pancreas</td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("ceapa") }}
                                </div>
                            </td>
                            <td>
                                <div class="form-group form-inline ceapa-container">
                                    {{ f.checkbox("ceapc","y","Calcification") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceapy","y","Cyst") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceapm","m","Mass") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceapo","y","Other") }}&nbsp;&nbsp;
                                    <label for="ceapos" class="aria-hidden">Specify</label>
                                    <input type="text" name="ceapos" id="ceapos" class="form-control"
                                           required="required" placeholder="Specify">
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td>Adrenals</td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("ceaaa") }}
                                </div>
                            </td>
                            <td>
                                <div class="form-group form-inline ceaaa-container">
                                    {{ f.checkbox("ceaac","y","Calcification") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceaay","y","Cyst") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceaam","m","Mass") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceaao","y","Other") }}&nbsp;&nbsp;
                                    <label for="ceaaos" class="aria-hidden">Specify</label>
                                    <input type="text" name="ceaaos" id="ceaaos" class="form-control"
                                           required="required" placeholder="Specify">
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Kidneys</td>
                            <td>
                                <div class="form-group">
                                    {{ f.yesCheckbox("ceaka") }}
                                </div>
                            </td>
                            <td>
                                <div class="form-group form-inline ceaka-container">
                                    {{ f.checkbox("ceakc","y","Calcification") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceaky","y","Cyst") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceakm","m","Mass") }}&nbsp;&nbsp;
                                    {{ f.checkbox("ceako","y","Other") }}&nbsp;&nbsp;
                                    <label for="ceakos" class="aria-hidden">Specify</label>
                                    <input type="text" name="ceakos" id="ceakos" class="form-control"
                                           required="required" placeholder="Specify">
                                </div>
                            </td>
                        </tr>


                        <tr>
                            <td colspan="3">
                                <div class="form-group">
                                    <label for="ceaoab">Additional comments on abdominal
                                        abnormalities</label>
                                    <textarea name="ceaoab" id="ceaoab" class="form-control"></textarea>
                                    {{ f.inlineCheckbox("ceaoabi", "y", "Include in impression") }}
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function initAbnormalities(fv) {
        //Neck and mediastinal
        $("#ceato").conditionallyDisplay({sourceValues: "o", enable: $("#ceatos")});
        $("#ceayo").conditionallyDisplay({sourceValues: "o", enable: $("#ceayos")});
        $("#cemvao").conditionallyDisplay({sourceValues: "o", enable: $("#cemvaos")});
        $("#cemvlno").conditionallyDisplay({sourceValues: "o", enable: $("#cemelnos")});
        $("#ceamo").conditionallyDisplay({sourceValues: "o", enable: $("#ceommos")});

        //at least one checkbox whose name starts with cemlnl is required if cemln==y
        $("#cemln").conditionallyEnable({enable: '#cemln-container'});

        $.each($("#abnormalities .yes-checkbox"), function (i, el) {
            const $checkbox = $(el);
            const name = $checkbox.attr('name');
            const $container = $("." + name + "-container");
            if ($container.length > 0) {
                $checkbox.conditionallyEnable({enable: $container});
            }
        });

        //Add validations after all other anonymous functions have run and fv is bound.
        if (fv) {
            fv.addField('cdoaw', {validators: {integer: {message: 'must be a whole number'}}});

            //lymph nodes; use a real element name for the field so conditional plugins can toggle the field
            fv.addField('cemlnl1', {
                selector: '[name^=cemlnl]',
                validators: {choice: {min: 1, message: 'Select one or more classification'}}
            });
        }
    }
</script>
